{% extends 'base_generic.html' %}
{% load i18n %}

{% block content %}
  <h2>{{ tour.name }}</h2>
  <p>{% trans "Description:" %} {{ tour.description }}</p>
  <p>{% trans "Price:" %} {{ tour.price }}</p>
  <p>{% trans "Date:" %} {{ tour.date }}</p>
  <p>{% trans "Stars:" %} {{ tour.calculate_stars }}</p> <!-- Hiển thị dấu sao -->
  {% for image in tour.image_set.all %}
    <img src="{{ image.image.url }}" alt="Tour Image" class="mt-2" width="50%" height="50%">
  {% endfor %}
  {% if user.is_authenticated %}
  <h2>{% trans "Rating and comment" %}</h2>
  <form method="post" action="{% url 'tour-rating-comment' tour.pk %}">
    {% csrf_token %}
    {{ rating_comment_form.as_p }}
    <button type="submit">{% trans "Submit ratings and comments" %}</button>
  </form>
{% endif %}
<p><h2>{% trans "Comment" %}</h2></p>
{% for comment in tour.rating_set.all %}
  <h5>{{ comment.user.username }} - {{ comment.create_time }}</h5>
  <p>{{ comment.get_star_rating }}</p>
  <p>{{ comment.content }}</p>
{% endfor %}
  <h2>{% trans "Book tour" %}</h2>
  {% if error_message %}
    <p style="color: red;">{{ error_message }}</p>
  {% endif %}
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">{% trans "Book Tour" %}</button>
  </form>
{% endblock %}
